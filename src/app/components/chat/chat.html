<div class="chat-container">
    <div class="container py-4">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="card shadow-lg">
            <div class="card-header bg-info text-white">
              <div class="d-flex justify-content-between align-items-center">
                <h3 class="mb-0"><i class="pi pi-comments"></i> Chat</h3>
                <button class="btn btn-light btn-sm" (click)="volverAlHome()">
                  <i class="pi pi-arrow-left"></i> Volver
                </button>
              </div>
              <p class="mb-0 mt-2"><small>Usuario: {{usuario()}}</small></p>
            </div>
            
            <div class="card-body p-0">
              <!-- Mensajes -->
              <div class="mensajes-container">
                <div *ngFor="let mensaje of (mensajes$ | async)" 
                     class="mensaje-item"
                     [class.mensaje-propio]="esMiMensaje(mensaje)"
                     [class.mensaje-ajeno]="!esMiMensaje(mensaje)">
                  <div class="mensaje-contenido">
                    <div class="mensaje-usuario">{{mensaje.usuario}}</div>
                    <div class="mensaje-texto">{{mensaje.mensaje}}</div>
                    <div class="mensaje-fecha">
                      {{obtenerFecha(mensaje.fecha) | date:'short'}}
                    </div>
                  </div>
                </div>
                
                <div *ngIf="!(mensajes$ | async)?.length" class="text-center text-muted py-5">
                  <i class="pi pi-inbox" style="font-size: 3rem;"></i>
                  <p class="mt-3">No hay mensajes aún. ¡Sé el primero en escribir!</p>
                </div>
              </div>
              
              <!-- Input de mensaje -->
              <div class="mensaje-input">
                <div class="input-group">
                  <input type="text" 
                         class="form-control" 
                         [(ngModel)]="nuevoMensaje"
                         placeholder="Escribe un mensaje..."
                         (keyup.enter)="enviarMensaje()"
                         [maxlength]="500">
                  <button class="btn btn-primary" 
                          (click)="enviarMensaje()"
                          [disabled]="!nuevoMensaje().trim()">
                    <i class="pi pi-send"></i> Enviar
                  </button>
                </div>
                <small class="text-muted">Presiona Enter para enviar</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
