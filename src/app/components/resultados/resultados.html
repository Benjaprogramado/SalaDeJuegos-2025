<div class="resultados-container">
    <div class="container py-4">
      <div class="row">
        <!-- Header -->
        <div class="col-12 mb-4">
          <div class="card shadow-lg">
            <div class="card-header bg-primary text-white">
              <div class="d-flex justify-content-between align-items-center">
                <h3 class="mb-0"><i class="pi pi-chart-bar"></i> Mis Resultados</h3>
                <button class="btn btn-light btn-sm" (click)="volverAlHome()">
                  <i class="pi pi-arrow-left"></i> Volver
                </button>
              </div>
            </div>
            
            <div class="card-body">
              <!-- Filtros -->
              <div class="mb-4">
                <label class="form-label fw-bold">Filtrar por juego:</label>
                <div class="btn-group w-100" role="group">
                  <button *ngFor="let juego of juegosDisponibles"
                          class="btn"
                          [class.btn-primary]="filtroJuego() === juego"
                          [class.btn-outline-primary]="filtroJuego() !== juego"
                          (click)="setFiltro(juego)">
                    {{juego === 'todos' ? 'Todos' : juego}}
                  </button>
                </div>
              </div>
              
              <!-- Estadísticas -->
              <div class="row g-3 mb-4">
                <div class="col-md-4">
                  <div class="stat-card bg-success text-white">
                    <i class="pi pi-trophy"></i>
                    <h4>{{mejorPuntaje()}}</h4>
                    <p>Mejor Puntaje</p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="stat-card bg-info text-white">
                    <i class="pi pi-chart-line"></i>
                    <h4>{{calcularPromedio()}}</h4>
                    <p>Promedio</p>
                  </div>
                </div>
                <div class="col-md-4">
                  <div class="stat-card bg-warning text-dark">
                    <i class="pi pi-list"></i>
                    <h4>{{totalPartidas()}}</h4>
                    <p>Total Partidas</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Lista de resultados -->
        <div class="col-12">
          <div class="card shadow-lg">
            <div class="card-header bg-secondary text-white">
              <h5 class="mb-0"><i class="pi pi-list"></i> Historial de Partidas</h5>
            </div>
            
            <div class="card-body">
              <!-- Cargando -->
              <div *ngIf="cargando()" class="text-center py-5">
                <i class="pi pi-spin pi-spinner" style="font-size: 3rem; color: #007bff;"></i>
                <p class="mt-3">Cargando resultados...</p>
              </div>
              
              <!-- Sin resultados -->
              <div *ngIf="!cargando() && resultadosFiltrados().length === 0" class="text-center py-5 text-muted">
                <i class="pi pi-inbox" style="font-size: 3rem;"></i>
                <p class="mt-3">No hay resultados para mostrar</p>
                <small>Juega algunos juegos para ver tus resultados aquí</small>
              </div>
              
              <!-- Tabla de resultados -->
              <div *ngIf="!cargando() && resultadosFiltrados().length > 0" class="table-responsive">
                <table class="table table-hover">
                  <thead class="table-light">
                    <tr>
                      <th>#</th>
                      <th>Juego</th>
                      <th>Puntaje</th>
                      <th>Fecha</th>
                      <th>Detalles</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let resultado of resultadosFiltrados(); let i = index">
                      <td>{{i + 1}}</td>
                      <td>
                        <strong>{{resultado.juego}}</strong>
                      </td>
                      <td>
                        <span class="badge bg-primary fs-6">{{resultado.puntaje}} pts</span>
                      </td>
                      <td>
                        <small>{{obtenerFecha(resultado.fecha) | date:'short'}}</small>
                      </td>
                      <td>
                        <button class="btn btn-sm btn-outline-info" 
                                *ngIf="resultado.detalles"
                                [title]="getDetallesTexto(resultado)">
                          <i class="pi pi-info-circle"></i>
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
