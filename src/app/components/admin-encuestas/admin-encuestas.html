<div class="admin-encuestas-container">
    <div class="container py-4">
      <div class="row">
        <!-- Header -->
        <div class="col-12 mb-4">
          <div class="card shadow-lg">
            <div class="card-header bg-danger text-white">
              <div class="d-flex justify-content-between align-items-center flex-wrap">
                <h3 class="mb-0">
                  <i class="pi pi-shield"></i> Panel de Administrador - Respuestas de Encuestas
                </h3>
                <button class="btn btn-light btn-sm" (click)="volverAlHome()">
                  <i class="pi pi-arrow-left"></i> Volver
                </button>
              </div>
            </div>
            
            <div class="card-body">
              <!-- Estadísticas generales -->
              <div class="row g-3">
                <div class="col-md-3 col-sm-6">
                  <div class="stat-card bg-primary text-white">
                    <i class="pi pi-users"></i>
                    <h4>{{respuestas().length}}</h4>
                    <p>Total Respuestas</p>
                  </div>
                </div>
                <div class="col-md-3 col-sm-6">
                  <div class="stat-card bg-warning text-dark">
                    <i class="pi pi-star-fill"></i>
                    <h4>{{calcularPromedioCalificacion()}}</h4>
                    <p>Calificación Promedio</p>
                  </div>
                </div>
                <div class="col-md-3 col-sm-6">
                  <div class="stat-card bg-success text-white">
                    <i class="pi pi-gamepad"></i>
                    <h4>{{juegoMasFavorito()}}</h4>
                    <p>Juego Favorito</p>
                  </div>
                </div>
                <div class="col-md-3 col-sm-6">
                  <div class="stat-card bg-info text-white">
                    <i class="pi pi-percentage"></i>
                    <h4>{{porcentajeVolveriaJugar()}}%</h4>
                    <p>Volvería a Jugar</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Lista de respuestas -->
        <div class="col-12">
          <div class="card shadow-lg">
            <div class="card-header bg-secondary text-white">
              <h5 class="mb-0"><i class="pi pi-list"></i> Todas las Respuestas ({{respuestas().length}})</h5>
            </div>
            
            <div class="card-body">
              <!-- Cargando -->
              <div *ngIf="cargando()" class="text-center py-5">
                <i class="pi pi-spin pi-spinner" style="font-size: 3rem; color: #007bff;"></i>
                <p class="mt-3">Cargando respuestas...</p>
              </div>
              
              <!-- Sin respuestas -->
              <div *ngIf="!cargando() && respuestas().length === 0" class="text-center py-5 text-muted">
                <i class="pi pi-inbox" style="font-size: 3rem;"></i>
                <p class="mt-3">No hay respuestas aún</p>
                <small>Las respuestas de las encuestas aparecerán aquí</small>
              </div>
              
              <!-- Tabla de respuestas -->
              <div *ngIf="!cargando() && respuestas().length > 0" class="table-responsive">
                <table class="table table-hover table-striped">
                  <thead class="table-dark">
                    <tr>
                      <th>#</th>
                      <th>Usuario</th>
                      <th>Fecha</th>
                      <th>Edad</th>
                      <th>Juego Favorito</th>
                      <th>Calificación</th>
                      <th>Volvería</th>
                      <th>Recomendaría</th>
                      <th>Sugerencias</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let respuesta of respuestas(); let i = index">
                      <td><strong>{{i + 1}}</strong></td>
                      <td class="text-primary">
                        <i class="pi pi-user"></i> {{respuesta.usuario}}
                      </td>
                      <td><small>{{respuesta.fecha | date:'dd/MM/yyyy HH:mm'}}</small></td>
                      <td>{{respuesta.edad}} años</td>
                      <td><span class="badge bg-info">{{respuesta.juegoFavorito}}</span></td>
                      <td>
                        <span class="badge bg-warning text-dark fs-6">
                          {{respuesta.calificacion}} <i class="pi pi-star-fill"></i>
                        </span>
                      </td>
                      <td>
                        <span class="badge" 
                              [class.bg-success]="respuesta.volveriaJugar === 'Sí'"
                              [class.bg-warning]="respuesta.volveriaJugar === 'Tal vez'"
                              [class.bg-danger]="respuesta.volveriaJugar === 'No'">
                          {{respuesta.volveriaJugar}}
                        </span>
                      </td>
                      <td>
                        <span class="badge" 
                              [class.bg-success]="respuesta.recomendaria === 'Sí'"
                              [class.bg-warning]="respuesta.recomendaria === 'Tal vez'"
                              [class.bg-danger]="respuesta.recomendaria === 'No'">
                          {{respuesta.recomendaria}}
                        </span>
                      </td>
                      <td>
                        <button class="btn btn-sm btn-outline-info" 
                                *ngIf="respuesta.sugerencias"
                                [title]="respuesta.sugerencias"
                                data-bs-toggle="tooltip">
                          <i class="pi pi-comment"></i>
                        </button>
                        <span *ngIf="!respuesta.sugerencias" class="text-muted">-</span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>